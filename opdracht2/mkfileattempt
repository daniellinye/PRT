CC = gcc
CFLAGS = -Iinclude -MMD -std=c++11 -lncurses -Wall
OBJS = main.o SheetView.o Sheet.o Range.o CellAddress.o Cell.o

all: $(OBJS) $(LIBNAME).so
	$(CC) $(CFLAGS) $(OBJS) -o Sheet

$(LIBNAME).so: $(OBJS)
	mkdir -p $(@D)
	$(CC)  -shared $(CFLAGS) -L$(@D) -I$(@D) -fPIC -o sheet main.cpp

Cell.o: Cell.cpp Cell.h
	$(CC) $(CompileParms) Cell.cpp

CellAdress.o: CellAdress.cpp CellAddress.h
	$(CC) $(CompileParms) CellAddress.cpp

Range.o: Range.cpp Range.h
	$(CC) $(CompileParms) Range.cpp

Sheet.o: Sheet.cpp Sheet.h
	$(CC) $(CompileParms) Sheet.cpp

SheetView.o: SheetView.cpp SheetView.h
	$(CC) $(CompileParms) SheetView.cpp

main.o: main.cpp
	$(CC) $(CompileParms)  main.cpp

clean:
	rm -f *.o *.so